# seeds.yml 
# ---------------------------------------------------------------------------
# Schema definitions for Ledgerline seed datasets.
#
# Seeds include CRM, catalog, reference lists, pricing, and sample usage.
# These CSVs load as static tables with dbt seed and act as portable
# inputs for dev, CI, and testing.
# ---------------------------------------------------------------------------

version: 2

seeds:

  # --------------------------------------------------------------------------
  # atlas_crm_customer_info
  # --------------------------------------------------------------------------
  # Simulates a CRM system-of-record. Each customer must have a unique code.
  # --------------------------------------------------------------------------

  - name: atlas_crm_customer_info

    columns:
      - name: customer_code
        description: Business key (later becomes dim_customer surrogate key)

      - name: customer_name

      - name: country_code
        description: FK to country seed

      - name: load_ts
        description: Ingestion timestamp (set via post-hook if blank)


  # --------------------------------------------------------------------------
  # atlas_catalog_product_info
  # --------------------------------------------------------------------------
  # Authoritative list of products/services. Example: API, ETL, Alerts.
  # --------------------------------------------------------------------------

  - name: atlas_catalog_product_info

    columns:
      - name: product_code
        description: Business key (hashed into product_key in staging)

      - name: product_name

      - name: category

      - name: load_ts


  # --------------------------------------------------------------------------
  # atlas_catalog_plan_info
  # --------------------------------------------------------------------------
  # Subscription plans offered under each product.
  # Example: Basic monthly vs Enterprise annual. Drives billing logic.
  # --------------------------------------------------------------------------

  - name: atlas_catalog_plan_info

    columns:
      - name: plan_code
        description: Business key (hashed into plan_key)

      - name: plan_name

      - name: product_code
        description: FK to product

      - name: billing_period
        description: Monthly or annual cadence

      - name: load_ts


  # --------------------------------------------------------------------------
  # atlas_country_info
  # --------------------------------------------------------------------------
  # ISO-like country list for geography rollups. Every customer must map here.
  # Default "-1" row avoids broken joins.
  # --------------------------------------------------------------------------

  - name: atlas_country_info

    columns:
      - name: country_code
        description: Business key (hashed into country_key)

      - name: country_name

      - name: load_ts


  # --------------------------------------------------------------------------
  # atlas_price_book_daily
  # --------------------------------------------------------------------------
  # Official per-unit prices by product + plan + day.
  # Separates the rate card from raw usage, so billing is modular and auditable.
  # --------------------------------------------------------------------------

  - name: atlas_price_book_daily

    columns:
      - name: product_code
        description: FK to product

      - name: plan_code
        description: FK to plan

      - name: price_date
        description: Effective date of rate

      - name: unit_price
        description: Price per unit that day

      - name: load_ts


  # --------------------------------------------------------------------------
  # atlas_meter_usage_daily
  # --------------------------------------------------------------------------
  # Metered usage rows per customer + product + plan + date.
  # Tests intentionally live on the real source (atlas_meter_usage_daily),
  # not here, so they persist when this seed is replaced by the live feed.
  # --------------------------------------------------------------------------

  - name: atlas_meter_usage_daily

    columns:
      - name: customer_code
        description: Business key from CRM

      - name: product_code
        description: Business key for product

      - name: plan_code
        description: Business key for subscription plan

      - name: report_date
        description: Calendar date of usage (UTC)

      - name: units_used
        description: Actual consumption for this customer/product/plan on that date

      - name: included_units
        description: Plan allowance for that date (baseline before overages)

      - name: load_ts
        description: Timestamp when the row was loaded into the warehouse.
